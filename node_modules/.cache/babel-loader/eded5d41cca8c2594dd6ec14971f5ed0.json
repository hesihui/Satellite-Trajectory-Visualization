{"ast":null,"code":"import _toConsumableArray from\"/Users/sihui/Documents/SDE_Learning/spacex/starlink/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/sihui/Documents/SDE_Learning/spacex/starlink/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/sihui/Documents/SDE_Learning/spacex/starlink/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/sihui/Documents/SDE_Learning/spacex/starlink/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/sihui/Documents/SDE_Learning/spacex/starlink/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/sihui/Documents/SDE_Learning/spacex/starlink/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import{Row,Col}from\"antd\";import{NEARBY_SATELLITE,SAT_API_KEY,STARLINK_CATEGORY}from\"../constants\";import SatSetting from\"./SatSetting\";import SatelliteList from\"./SatelliteList\";import WorldMap from\"./WorldMap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Main=/*#__PURE__*/function(_Component){_inherits(Main,_Component);var _super=_createSuper(Main);function Main(){var _this;_classCallCheck(this,Main);_this=_super.call(this);_this.showMap=function(selected){_this.setState(function(preState){return _objectSpread(_objectSpread({},preState),{},{satList:_toConsumableArray(selected)});});};_this.showNearbySatellite=function(setting){_this.setState({isLoadingList:true,setting:setting});_this.fetchSatellite(setting);};_this.fetchSatellite=function(setting){var latitude=setting.latitude,longitude=setting.longitude,elevation=setting.elevation,altitude=setting.altitude;var url=\"/api/\".concat(NEARBY_SATELLITE,\"/\").concat(latitude,\"/\").concat(longitude,\"/\").concat(elevation,\"/\").concat(altitude,\"/\").concat(STARLINK_CATEGORY,\"/&apiKey=\").concat(SAT_API_KEY);_this.setState({isLoadingList:true});axios.get(url).then(function(response){console.log(response.data);_this.setState({satInfo:response.data,isLoadingList:false});}).catch(function(error){console.log(\"err in fetch satellite -> \",error);});};_this.state={satInfo:null,satList:null,setting:null,isLoadingList:false};return _this;}_createClass(Main,[{key:\"render\",value:function render(){var _this$state=this.state,isLoadingList=_this$state.isLoadingList,satInfo=_this$state.satInfo,satList=_this$state.satList,setting=_this$state.setting;return/*#__PURE__*/_jsxs(Row,{className:\"main\",children:[/*#__PURE__*/_jsxs(Col,{span:8,className:\"left-side\",children:[/*#__PURE__*/_jsx(SatSetting,{onShow:this.showNearbySatellite}),/*#__PURE__*/_jsx(SatelliteList,{isLoad:isLoadingList,satInfo:satInfo,onShowMap:this.showMap})]}),/*#__PURE__*/_jsx(Col,{span:16,className:\"right-side\",children:/*#__PURE__*/_jsx(WorldMap,{satData:satList,observerData:setting})})]});}}]);return Main;}(Component);export default Main;","map":{"version":3,"sources":["/Users/sihui/Documents/SDE_Learning/spacex/starlink/src/components/Main.js"],"names":["React","Component","axios","Row","Col","NEARBY_SATELLITE","SAT_API_KEY","STARLINK_CATEGORY","SatSetting","SatelliteList","WorldMap","Main","showMap","selected","setState","preState","satList","showNearbySatellite","setting","isLoadingList","fetchSatellite","latitude","longitude","elevation","altitude","url","get","then","response","console","log","data","satInfo","catch","error","state"],"mappings":"m/BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,GAAT,CAAcC,GAAd,KAAyB,MAAzB,CACA,OAASC,gBAAT,CAA2BC,WAA3B,CAAwCC,iBAAxC,KAAiE,cAAjE,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,C,2FAEMC,CAAAA,I,4FACF,eAAc,sCACV,wBADU,MA4BdC,OA5Bc,CA4BJ,SAAAC,QAAQ,CAAI,CAClB,MAAKC,QAAL,CAAc,SAAAC,QAAQ,wCACfA,QADe,MAElBC,OAAO,oBAAMH,QAAN,CAFW,IAAtB,EAIH,CAjCa,OAmCdI,mBAnCc,CAmCQ,SAAAC,OAAO,CAAI,CAC7B,MAAKJ,QAAL,CAAc,CACVK,aAAa,CAAE,IADL,CAEVD,OAAO,CAAEA,OAFC,CAAd,EAIA,MAAKE,cAAL,CAAoBF,OAApB,EACH,CAzCa,OA2CdE,cA3Cc,CA2CG,SAAAF,OAAO,CAAI,CACxB,GAAQG,CAAAA,QAAR,CAAqDH,OAArD,CAAQG,QAAR,CAAkBC,SAAlB,CAAqDJ,OAArD,CAAkBI,SAAlB,CAA6BC,SAA7B,CAAqDL,OAArD,CAA6BK,SAA7B,CAAwCC,QAAxC,CAAqDN,OAArD,CAAwCM,QAAxC,CACA,GAAMC,CAAAA,GAAG,gBAAWpB,gBAAX,aAA+BgB,QAA/B,aAA2CC,SAA3C,aAAwDC,SAAxD,aAAqEC,QAArE,aAAiFjB,iBAAjF,qBAA8GD,WAA9G,CAAT,CAEA,MAAKQ,QAAL,CAAc,CACVK,aAAa,CAAE,IADL,CAAd,EAIAjB,KAAK,CACAwB,GADL,CACSD,GADT,EAEKE,IAFL,CAEU,SAAAC,QAAQ,CAAI,CACdC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAArB,EACA,MAAKjB,QAAL,CAAc,CACVkB,OAAO,CAAEJ,QAAQ,CAACG,IADR,CAEVZ,aAAa,CAAE,KAFL,CAAd,EAIH,CARL,EASKc,KATL,CASW,SAAAC,KAAK,CAAI,CACZL,OAAO,CAACC,GAAR,CAAY,4BAAZ,CAA0CI,KAA1C,EACH,CAXL,EAYH,CA/Da,CAEV,MAAKC,KAAL,CAAa,CACTH,OAAO,CAAE,IADA,CAEThB,OAAO,CAAE,IAFA,CAGTE,OAAO,CAAE,IAHA,CAITC,aAAa,CAAE,KAJN,CAAb,CAFU,aAQb,C,uCACD,iBAAS,CACL,gBAAqD,KAAKgB,KAA1D,CAAQhB,aAAR,aAAQA,aAAR,CAAuBa,OAAvB,aAAuBA,OAAvB,CAAgChB,OAAhC,aAAgCA,OAAhC,CAAyCE,OAAzC,aAAyCA,OAAzC,CACA,mBACI,MAAC,GAAD,EAAK,SAAS,CAAC,MAAf,wBACI,MAAC,GAAD,EAAK,IAAI,CAAE,CAAX,CAAc,SAAS,CAAC,WAAxB,wBACI,KAAC,UAAD,EAAY,MAAM,CAAE,KAAKD,mBAAzB,EADJ,cAEI,KAAC,aAAD,EACI,MAAM,CAAEE,aADZ,CAEI,OAAO,CAAEa,OAFb,CAGI,SAAS,CAAE,KAAKpB,OAHpB,EAFJ,GADJ,cASI,KAAC,GAAD,EAAK,IAAI,CAAE,EAAX,CAAe,SAAS,CAAC,YAAzB,uBACI,KAAC,QAAD,EAAU,OAAO,CAAEI,OAAnB,CAA4B,YAAY,CAAEE,OAA1C,EADJ,EATJ,GADJ,CAeH,C,kBA3BcjB,S,EAmEnB,cAAeU,CAAAA,IAAf","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Row, Col } from \"antd\";\nimport { NEARBY_SATELLITE, SAT_API_KEY, STARLINK_CATEGORY } from \"../constants\";\nimport SatSetting from \"./SatSetting\";\nimport SatelliteList from \"./SatelliteList\";\nimport WorldMap from \"./WorldMap\";\n\nclass Main extends Component {\n    constructor() {\n        super();\n        this.state = {\n            satInfo: null,\n            satList: null,\n            setting: null,\n            isLoadingList: false\n        };\n    }\n    render() {\n        const { isLoadingList, satInfo, satList, setting } = this.state;\n        return (\n            <Row className=\"main\">\n                <Col span={8} className=\"left-side\">\n                    <SatSetting onShow={this.showNearbySatellite} />\n                    <SatelliteList\n                        isLoad={isLoadingList}\n                        satInfo={satInfo}\n                        onShowMap={this.showMap}\n                    />\n                </Col>\n                <Col span={16} className=\"right-side\">\n                    <WorldMap satData={satList} observerData={setting} />\n                </Col>\n            </Row>\n        );\n    }\n\n    showMap = selected => {\n        this.setState(preState => ({\n            ...preState,\n            satList: [...selected]\n        }));\n    };\n\n    showNearbySatellite = setting => {\n        this.setState({\n            isLoadingList: true,\n            setting: setting\n        });\n        this.fetchSatellite(setting);\n    };\n\n    fetchSatellite = setting => {\n        const { latitude, longitude, elevation, altitude } = setting;\n        const url = `/api/${NEARBY_SATELLITE}/${latitude}/${longitude}/${elevation}/${altitude}/${STARLINK_CATEGORY}/&apiKey=${SAT_API_KEY}`;\n\n        this.setState({\n            isLoadingList: true\n        });\n\n        axios\n            .get(url)\n            .then(response => {\n                console.log(response.data);\n                this.setState({\n                    satInfo: response.data,\n                    isLoadingList: false\n                });\n            })\n            .catch(error => {\n                console.log(\"err in fetch satellite -> \", error);\n            });\n    };\n}\n\nexport default Main;\n"]},"metadata":{},"sourceType":"module"}